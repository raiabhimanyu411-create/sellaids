"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9176],{19176(e,s,t){t.r(s),t.d(s,{default:()=>c});var l=t(89379),i=t(79722),r=t(65043),a=t(47874),o=t(90837),n=t(23768),d=t(70579);function c(){const[e,s]=(0,r.useState)({title:"",message:""}),[t,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),h=(0,a.Zp)(),{user:p}=(0,o.A)(),g=t=>{s((0,l.A)((0,l.A)({},e),{},{[t.target.name]:t.target.value})),c("")};return(0,d.jsxs)("div",{className:"max-w-3xl mx-auto p-6 bg-white rounded shadow mt-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Raise a Support Ticket"}),t&&(0,d.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:t}),(0,d.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),m(!0),c("");try{const t=await i.A.post("".concat("https://sellaids.com","/api/user/support"),{title:e.title,message:e.message},{withCredentials:!0});console.log("Server response:",JSON.stringify(t.data,null,2));const{success:l,message:r,data:a,error:o}=t.data,d=null===a||void 0===a?void 0:a.ticket;if(l&&d)s({title:"",message:""}),n.oR.success("Ticket raised successfully \u2705"),setTimeout(()=>{h("/user/support")},1500);else{const e=(null===o||void 0===o?void 0:o.join(", "))||r||"Failed to raise ticket \u274c";c(e),n.oR.error(e,{style:{background:"#fee2e2",color:"#dc2626"}})}}catch(p){var l,r,a,o,d,u;console.error("Axios error:",JSON.stringify(null===(l=p.response)||void 0===l?void 0:l.data,null,2));const e=(null===(r=p.response)||void 0===r||null===(a=r.data)||void 0===a||null===(o=a.error)||void 0===o?void 0:o.join(", "))||(null===(d=p.response)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.message)||"Failed to raise ticket. Please try again \u274c";c(e),n.oR.error(e,{style:{background:"#fee2e2",color:"#dc2626"}})}finally{m(!1)}},className:"space-y-5",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-gray-700 mb-1",children:"Title"}),(0,d.jsx)("input",{type:"text",name:"title",placeholder:"Enter ticket title",value:e.title,onChange:g,className:"w-full border px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600",required:!0,maxLength:200,disabled:u})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-gray-700 mb-1",children:"Message"}),(0,d.jsx)("textarea",{name:"message",placeholder:"Describe your issue",value:e.message,onChange:g,className:"w-full border px-4 py-2 rounded min-h-[120px] focus:outline-none focus:ring-2 focus:ring-red-600",required:!0,disabled:u})]}),(0,d.jsxs)("div",{className:"flex space-x-4",children:[(0,d.jsx)("button",{type:"submit",disabled:u,className:"bg-red-600 text-white px-6 py-3 rounded hover:bg-red-700 disabled:bg-red-400",children:u?"Submitting...":"Submit Ticket"}),(0,d.jsx)("button",{type:"button",onClick:()=>{h("/user/support")},className:"bg-gray-300 text-gray-700 px-6 py-3 rounded hover:bg-gray-400",disabled:u,children:"Cancel"})]})]})]})}},90837(e,s,t){t.d(s,{A:()=>l});const l=(0,t(4131).v)(e=>({user:null,wishlist:[],setUser:s=>e({user:s}),logout:()=>e({user:null,wishlist:[]}),setWishlist:s=>e({wishlist:s}),addToWishlist:s=>e(e=>({wishlist:[...e.wishlist,s]})),removeFromWishlist:s=>e(e=>({wishlist:e.wishlist.filter(e=>e.id!==s)}))}))}}]);
//# sourceMappingURL=9176.58b8b3e8.chunk.js.map