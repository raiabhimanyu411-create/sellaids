"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[6768],{76768(e,s,a){a.r(s),a.d(s,{default:()=>n});var t=a(89379),l=a(65043),d=a(90837),r=a(79722),i=a(70579);function n(){const{user:e}=(0,d.A)(),[s,a]=(0,l.useState)([]),[n,o]=(0,l.useState)({label:"",address:"",phone:""}),[c,h]=(0,l.useState)(null),[u,p]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{null!==e&&void 0!==e&&e.id&&b()},[e]);const b=async()=>{try{x(!0);const s=await r.A.get("http://localhost:5000api/user/".concat(e.id,"/addresses"));a(s.data)}catch(s){console.error("Failed to fetch addresses:",s)}finally{x(!1)}},f=e=>{const{name:s,value:a}=e.target;o(e=>(0,t.A)((0,t.A)({},e),{},{[s]:a}))},v=()=>{h(null),o({label:"",address:"",phone:""}),p(!1)};return m?(0,i.jsx)("p",{children:"Loading addresses..."}):(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Manage Address"}),s.map(s=>(0,i.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow mb-4 flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium",children:s.label}),(0,i.jsx)("p",{children:s.address}),s.phone&&(0,i.jsxs)("p",{className:"text-sm text-gray-500",children:["Phone: ",s.phone]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[!u&&(0,i.jsx)("button",{onClick:()=>{return h((e=s).id),o({label:e.label,address:e.address,phone:e.phone||""}),void p(!0);var e},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Edit"}),u&&c===s.id&&(0,i.jsx)("button",{onClick:()=>(async s=>{if(window.confirm("Are you sure to delete this address?"))try{const t=await r.A.delete("http://localhost:5000api/user/".concat(e.id,"/addresses/").concat(s));a(t.data),c===s&&v()}catch(l){var t;console.error((null===(t=l.response)||void 0===t?void 0:t.data)||l.message),alert("Failed to delete address")}})(s.id),className:"text-red-600 hover:text-red-800 font-semibold",children:"Delete"})]})]},s.id)),u&&(0,i.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),n.label&&n.address)try{let s;s=c?await r.A.put("http://localhost:5000api/user/".concat(e.id,"/addresses/").concat(c),n):await r.A.post("http://localhost:5000api/user/".concat(e.id,"/addresses"),n),a(s.data),v()}catch(l){var t;console.error((null===(t=l.response)||void 0===t?void 0:t.data)||l.message),alert("Failed to save address")}else alert("Please fill at least label and address")},className:"bg-white p-4 rounded-xl shadow space-y-4 max-w-md",children:[(0,i.jsx)("input",{type:"text",name:"label",placeholder:"Label (e.g. Home, Office)",value:n.label,onChange:f,className:"border px-3 py-2 rounded w-full",required:!0}),(0,i.jsx)("textarea",{name:"address",placeholder:"Address",value:n.address,onChange:f,className:"border px-3 py-2 rounded w-full",required:!0}),(0,i.jsx)("input",{type:"text",name:"phone",placeholder:"Phone (optional)",value:n.phone,onChange:f,className:"border px-3 py-2 rounded w-full"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{type:"submit",className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:c?"Update Address":"+ Add New Address"}),(0,i.jsx)("button",{type:"button",onClick:v,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})]})}},90837(e,s,a){a.d(s,{A:()=>t});const t=(0,a(4131).v)(e=>({user:null,wishlist:[],setUser:s=>e({user:s}),logout:()=>e({user:null,wishlist:[]}),setWishlist:s=>e({wishlist:s}),addToWishlist:s=>e(e=>({wishlist:[...e.wishlist,s]})),removeFromWishlist:s=>e(e=>({wishlist:e.wishlist.filter(e=>e.id!==s)}))}))}}]);
//# sourceMappingURL=6768.a90749e9.chunk.js.map