/*! For license information please see 7864.75ba369a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[7864],{35087(e,t,a){a.d(t,{A:()=>s});const s=(0,a(77784).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},77864(e,t,a){a.r(t),a.d(t,{default:()=>i});var s=a(65043),r=a(7104),n=a(35087),l=a(79722),d=a(11238),c=a(23768),o=a(70579);const i=()=>{const[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)(""),[p,x]=(0,s.useState)("all"),[h,m]=(0,s.useState)(""),[u,b]=(0,s.useState)(""),[g,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[f,v]=(0,s.useState)(1),[_,w]=(0,s.useState)(1),k=async()=>{N(!0);try{const s=await l.A.get("".concat("https://sellaids.com","/api/admin/management/payment"),{params:{transaction_id:a,status:p,start_date:h,end_date:u,page:f,limit:10},withCredentials:!0}),{success:r,data:n,message:d}=s.data;var e;if(r)t(n.data||[]),w((null===(e=n.pagination)||void 0===e?void 0:e.totalPages)||1),d&&c.Ay.success(d);else t([]),c.Ay.error(d||"Failed to fetch payments")}catch(s){console.error(s),c.Ay.error("Error fetching payments")}finally{N(!1)}};(0,s.useEffect)(()=>{k()},[f,p,h,u]);return(0,o.jsxs)("div",{className:"p-3 space-y-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h2",{className:"text-xl font-bold",children:"Payments & Transactions"}),(0,o.jsxs)("button",{onClick:()=>{if(!e.length)return;const t=d.Wp.json_to_sheet(e.map((e,t)=>({SR:10*(f-1)+t+1,"Payment ID":e.id,"Order ID":e.order_id,Vendor:e.vendor_id,Amount:e.amount,Commission:e.platform_fee,"Vendor Payout":e.vendor_earning,Status:e.payment_status,Method:e.payment_method,"Transaction ID":e.transaction_id,"Payment Date":e.payment_date}))),a=d.Wp.book_new();d.Wp.book_append_sheet(a,t,"Payments"),d._h(a,"Payments_Report.xlsx")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,o.jsx)(r.A,{className:"h-4 w-4"})," Export Report"]})]}),(0,o.jsxs)("div",{className:"mb-4 flex gap-2 w-full bg-white shadow-sm p-4 rounded-lg",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search by Transaction ID...",value:a,onChange:e=>i(e.target.value),className:"border rounded-lg px-3 py-2 w-full"}),(0,o.jsx)("button",{onClick:()=>{v(1),k()},className:"bg-[#FF6A00] text-white px-4 py-2 rounded-lg",children:"Search"}),(0,o.jsxs)("select",{className:"border rounded-lg px-3 py-2",value:p,onChange:e=>{x(e.target.value),v(1)},children:[(0,o.jsx)("option",{value:"all",children:"All"}),(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"success",children:"Success"}),(0,o.jsx)("option",{value:"failed",children:"Failed"}),(0,o.jsx)("option",{value:"refunded",children:"Refunded"})]}),(0,o.jsx)("input",{type:"date",className:"border rounded-lg px-3 py-2",value:h,onChange:e=>{m(e.target.value),v(1)}}),(0,o.jsx)("input",{type:"date",className:"border rounded-lg px-3 py-2",value:u,onChange:e=>{b(e.target.value),v(1)}})]}),(0,o.jsx)("div",{className:"bg-white shadow rounded-lg overflow-x-auto",children:j?(0,o.jsx)("div",{className:"text-center p-6 text-gray-500",children:"Loading payments..."}):0===e.length?(0,o.jsx)("div",{className:"text-center p-6 text-gray-500",children:"No transactions available."}):(0,o.jsxs)("table",{className:"w-full border-collapse",children:[(0,o.jsx)("thead",{className:"bg-gray-100 text-left",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-3 border",children:"SR."}),(0,o.jsx)("th",{className:"p-3 border",children:"Payment ID"}),(0,o.jsx)("th",{className:"p-3 border",children:"Order ID"}),(0,o.jsx)("th",{className:"p-3 border",children:"Amount"}),(0,o.jsx)("th",{className:"p-3 border",children:"Commission"}),(0,o.jsx)("th",{className:"p-3 border",children:"Vendor Payout"}),(0,o.jsx)("th",{className:"p-3 border",children:"Status"}),(0,o.jsx)("th",{className:"p-3 border",children:"Transaction ID"}),(0,o.jsx)("th",{className:"p-3 border",children:"Payment Date"}),(0,o.jsx)("th",{className:"p-3 border text-center",children:"Action"})]})}),(0,o.jsx)("tbody",{children:e.map((e,t)=>(0,o.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-3 border",children:10*(f-1)+t+1}),(0,o.jsx)("td",{className:"p-3 border text-blue-600",children:e.id}),(0,o.jsx)("td",{className:"p-3 border",children:e.order_id}),(0,o.jsx)("td",{className:"p-3 border font-bold",children:e.amount}),(0,o.jsx)("td",{className:"p-3 border text-green-600",children:e.platform_fee}),(0,o.jsx)("td",{className:"p-3 border text-blue-600",children:e.vendor_earning}),(0,o.jsx)("td",{className:"p-3 border capitalize",children:(0,o.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("pending"===e.payment_status?"bg-yellow-100 text-yellow-800":"success"===e.payment_status?"bg-green-100 text-green-800":"failed"===e.payment_status?"bg-red-100 text-red-800":"refunded"===e.payment_status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.payment_status})}),(0,o.jsx)("td",{className:"p-3 border break-all whitespace-normal max-w-[160px]",children:e.transaction_id}),(0,o.jsx)("td",{className:"p-3 border",children:e.payment_date?new Date(e.payment_date).toISOString().split("T")[0]:"-"}),(0,o.jsx)("td",{className:"p-3 border text-center",children:(0,o.jsx)(n.A,{className:"h-4 w-4 text-blue-600 cursor-pointer inline-block",onClick:()=>y(e)})})]},e.id))})]})}),_>1&&(0,o.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,o.jsx)("button",{onClick:()=>v(e=>Math.max(e-1,1)),disabled:1===f,className:"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50",children:"Prev"}),(()=>{const e=[];let t=Math.max(1,f-2),a=Math.min(_,t+5-1);a-t<4&&(t=Math.max(1,a-5+1)),t>1&&(e.push((0,o.jsx)("button",{onClick:()=>v(1),className:"px-3 py-1 border rounded ".concat(1===f?"bg-blue-600 text-white":""),children:"1"},1)),e.push((0,o.jsx)("span",{children:"..."},"dots1")));for(let s=t;s<=a;s++)e.push((0,o.jsx)("button",{onClick:()=>v(s),className:"px-3 py-1 border rounded ".concat(f===s?"bg-blue-600 text-white":""),children:s},s));return a<_&&(e.push((0,o.jsx)("span",{children:"..."},"dots2")),e.push((0,o.jsx)("button",{onClick:()=>v(_),className:"px-3 py-1 border rounded ".concat(f===_?"bg-blue-600 text-white":""),children:_},_))),e})(),(0,o.jsx)("button",{onClick:()=>v(e=>Math.min(e+1,_)),disabled:f===_,className:"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50",children:"Next"})]}),g&&(0,o.jsx)("div",{className:"fixed -inset-6 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 relative",children:[(0,o.jsx)("button",{className:"absolute top-2 right-2 text-gray-500 text-xl",onClick:()=>y(null),children:"\xd7"}),(0,o.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Payment Details"}),Object.entries(g).map(e=>{let[t,a]=e;return(0,o.jsxs)("p",{className:"text-sm mb-1",children:[(0,o.jsxs)("strong",{className:"capitalize",children:[t,":"]})," ",null===a||void 0===a?void 0:a.toString()]},t)})]})})]})}}}]);
//# sourceMappingURL=7864.75ba369a.chunk.js.map