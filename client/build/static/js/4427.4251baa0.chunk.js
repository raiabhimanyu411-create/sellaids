"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[4427],{24427(e,t,l){l.r(t),l.d(t,{default:()=>p});var r=l(65043),s=l(47874),a=l(7104),d=l(35087),n=l(79722),o=l(11238),c=l(23768);l(21389),l(64857);var i=l(70579);const p=()=>{const[e,t]=(0,r.useState)([]),[l,p]=(0,r.useState)({}),[x,u]=(0,r.useState)(!0),[h,m]=(0,r.useState)(""),[b,v]=(0,r.useState)("all"),[g,j]=(0,r.useState)(""),[y,N]=(0,r.useState)(""),[f,w]=(0,r.useState)(1),[_,C]=(0,r.useState)(0),[S,k]=(0,r.useState)(!1),[A,I]=(0,r.useState)(""),[P,D]=(0,r.useState)(null),O=async()=>{try{u(!0);const l=await n.A.get("".concat("https://sellaids.com","/api/admin/management/order"),{params:{order_id:h,status:b,start_date:g,end_date:y,page:f,limit:10},withCredentials:!0}),{success:r,data:s}=l.data;var e;if(r)p(s.counts||{}),t(s.orders||[]),C((null===(e=s.pagination)||void 0===e?void 0:e.totalPages)||0);else t([]),C(0)}catch(l){console.error(l),c.Ay.error("Error fetching orders"),t([]),C(0)}finally{u(!1)}};(0,r.useEffect)(()=>{O()},[b,f,g,y]);const M=async e=>{if(null===e||void 0===e||!e.invoice_pdf_url)return void c.Ay.error("Invoice not available for this order yet.");const t=document.createElement("a");t.href="".concat(window.location.origin).concat(e.invoice_pdf_url),t.download="invoice-".concat(e.id,".pdf"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},E=[{label:"Total Orders",value:(null===l||void 0===l?void 0:l.total)||0,icon:"\ud83d\uded2"},{label:"Pending",value:(null===l||void 0===l?void 0:l.pending)||0,icon:"\u23f1\ufe0f"},{label:"Shipped",value:(null===l||void 0===l?void 0:l.shipped)||0,icon:"\ud83d\ude9a"},{label:"Delivered",value:(null===l||void 0===l?void 0:l.delivered)||0,icon:"\u2705"},{label:"Cancelled",value:(null===l||void 0===l?void 0:l.cancelled)||0,icon:"\u274c"}];return(0,i.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen text-gray-800 space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold",children:"Orders Management"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Track and manage all orders"})]}),(0,i.jsxs)("button",{onClick:()=>{if(null===e||void 0===e||!e.length)return c.Ay.error("No orders to export");const t=o.Wp.json_to_sheet(e.map((e,t)=>{var l,r,s;return{SR_No:10*(f-1)+t+1,Order_ID:e.id,Customer:(null===(l=e.User)||void 0===l?void 0:l.name)||"-",Vendor:(null===(r=e.Vendor)||void 0===r?void 0:r.name)||"-",Product:(null===(s=e.product)||void 0===s?void 0:s.product_type)||"-",Amount:e.total_amount,Status:e.order_status,Date:e.order_date?new Date(e.order_date).toISOString().split("T")[0]:"-"}})),l=o.Wp.book_new();o.Wp.book_append_sheet(l,t,"Orders"),o._h(l,"orders.xlsx")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2 hover:bg-blue-700",children:[(0,i.jsx)(a.A,{size:16})," Export Excel"]})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:E.map((e,t)=>(0,i.jsxs)("div",{className:"rounded-xl border bg-white shadow-sm p-4 flex flex-col items-center",children:[(0,i.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,i.jsx)("p",{className:"text-lg font-bold",children:e.value}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:e.label})]},t))}),(0,i.jsxs)("div",{className:"flex gap-2 items-center bg-white shadow-sm p-4 rounded-lg w-full",children:[(0,i.jsx)("input",{type:"text",placeholder:"Search by Order ID",value:h,onChange:e=>m(e.target.value),className:"px-3 py-2 border rounded-lg w-full"}),(0,i.jsx)("button",{onClick:()=>{w(1),O()},className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-orange-500",children:"Search"}),(0,i.jsx)("input",{type:"date",value:g,onChange:e=>j(e.target.value),className:"px-3 py-2 border rounded-lg"}),(0,i.jsx)("input",{type:"date",value:y,onChange:e=>N(e.target.value),className:"px-3 py-2 border rounded-lg"}),(0,i.jsxs)("select",{value:b,onChange:e=>{v(e.target.value),w(1)},className:"px-3 py-2 border rounded-lg",children:[(0,i.jsx)("option",{value:"all",children:"All"}),(0,i.jsx)("option",{value:"pending",children:"Pending"}),(0,i.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,i.jsx)("option",{value:"packed",children:"Packed"}),(0,i.jsx)("option",{value:"shipped",children:"Shipped"}),(0,i.jsx)("option",{value:"delivered",children:"Delivered"}),(0,i.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,i.jsx)("div",{className:"bg-white shadow rounded-lg overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full border-collapse text-left",children:[(0,i.jsx)("thead",{className:"bg-gray-100",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-4 py-3 border",children:"SR."}),(0,i.jsx)("th",{className:"px-4 py-3 border",children:"Order ID"}),(0,i.jsx)("th",{className:"px-4 py-3 border",children:"Customer Name"}),(0,i.jsx)("th",{className:"px-4 py-3 border",children:"Vendor Name"}),(0,i.jsx)("th",{className:"px-4 py-3 border",children:"Product Name"}),(0,i.jsx)("th",{className:"px-4 py-3 border",children:"Amount"}),(0,i.jsx)("th",{className:"px-4 py-3 border",children:"Status"}),(0,i.jsx)("th",{className:"px-4 py-3 border",children:"Invoice"}),(0,i.jsx)("th",{className:"px-4 py-3 border",children:"Actions"})]})}),(0,i.jsx)("tbody",{children:x?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:9,className:"text-center py-6",children:"Loading orders..."})}):0===e.length?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:9,className:"text-center py-6",children:"No data found"})}):e.map((e,t)=>{var l,r,n;return(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-4 py-3 border",children:10*(f-1)+t+1}),(0,i.jsx)("td",{className:"px-4 py-3 border text-blue-600 font-medium",children:e.id}),(0,i.jsx)("td",{className:"px-4 py-3 border",children:(null===(l=e.User)||void 0===l?void 0:l.name)||"-"}),(0,i.jsx)("td",{className:"px-4 py-3 border",children:(null===(r=e.Vendor)||void 0===r?void 0:r.name)||"-"}),(0,i.jsx)("td",{className:"px-4 py-3 border",children:(null===(n=e.product)||void 0===n?void 0:n.product_type)||"-"}),(0,i.jsxs)("td",{className:"px-4 py-3 border font-bold",children:["\u20b9",e.total_amount]}),(0,i.jsx)("td",{className:"px-4 py-3 border",children:(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("delivered"===e.order_status?"bg-green-100 text-green-700":"pending"===e.order_status?"bg-yellow-100 text-yellow-700":"cancelled"===e.order_status?"bg-red-100 text-red-700":"bg-purple-100 text-purple-700"),children:e.order_status})}),(0,i.jsxs)("td",{className:"p-3 border text-center flex gap-3 justify-center",children:[(0,i.jsx)(d.A,{className:"h-5 w-5 text-blue-600 cursor-pointer",onClick:()=>(async e=>{if(D(e),null===e||void 0===e||!e.invoice_pdf_url)return void c.Ay.error("Invoice not generated yet. Please try again later.");const t=window.location.origin;I("".concat(t).concat(e.invoice_pdf_url)),console.log("".concat("https://sellaids.com").concat(e.invoice_pdf_url)),k(!0)})(e)}),(0,i.jsx)(a.A,{className:"h-5 w-5 text-green-600 cursor-pointer",onClick:()=>M(e)})]}),(0,i.jsx)("td",{className:"px-4 py-3 border",children:(0,i.jsxs)(s.N_,{to:"/admin/orders/".concat(e.id),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[(0,i.jsx)(d.A,{size:16})," View"]})})]},t)})})]})}),_>1&&(0,i.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,i.jsx)("button",{onClick:()=>w(e=>Math.max(e-1,1)),disabled:1===f,className:"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50",children:"Prev"}),(()=>{const e=[];let t=Math.max(1,f-2),l=Math.min(_,t+5-1);l-t<4&&(t=Math.max(1,l-5+1)),t>1&&(e.push((0,i.jsx)("button",{onClick:()=>w(1),className:"px-3 py-1 border rounded ".concat(1===f?"bg-blue-600 text-white":""),children:"1"},1)),e.push((0,i.jsx)("span",{children:"..."},"dots1")));for(let r=t;r<=l;r++)e.push((0,i.jsx)("button",{onClick:()=>w(r),className:"px-3 py-1 border rounded ".concat(f===r?"bg-blue-600 text-white":""),children:r},r));return l<_&&(e.push((0,i.jsx)("span",{children:"..."},"dots2")),e.push((0,i.jsx)("button",{onClick:()=>w(_),className:"px-3 py-1 border rounded ".concat(f===_?"bg-blue-600 text-white":""),children:_},_))),e})(),(0,i.jsx)("button",{onClick:()=>w(e=>Math.min(e+1,_)),disabled:f===_,className:"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50",children:"Next"})]}),S&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center",children:(0,i.jsxs)("div",{className:"bg-white w-[80%] h-[95%] rounded-lg p-4 relative",children:[(0,i.jsx)("button",{onClick:()=>k(!1),className:"absolute top-2 right-2 text-red-500 font-bold",children:"\u2715"}),(0,i.jsx)("iframe",{src:A,className:"w-full h-[90%] border",title:"Invoice Preview"}),(0,i.jsx)("div",{className:"text-right mt-2"}),(0,i.jsx)("button",{onClick:()=>M(P),className:"px-4 py-2 bg-green-600 text-white rounded",children:"Download Invoice"})]})})]})}}}]);
//# sourceMappingURL=4427.4251baa0.chunk.js.map