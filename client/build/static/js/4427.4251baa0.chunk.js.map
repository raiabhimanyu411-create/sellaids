{"version":3,"file":"static/js/4427.4251baa0.chunk.js","mappings":"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","sources":["pages/Admin/Orders.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Download, Eye } from \"lucide-react\";\r\nimport axios from \"axios\";\r\nimport * as XLSX from \"xlsx\";\r\nimport toast from \"react-hot-toast\";\r\nimport { generateDummyInvoice } from \"../../utils/invoicePdf\";\r\n\r\nconst Orders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [counts, setCounts] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState(\"all\");\r\n  const [startDate, setStartDate] = useState(\"\");\r\n  const [endDate, setEndDate] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [showInvoiceModal, setShowInvoiceModal] = useState(false);\r\n  const [invoiceUrl, setInvoiceUrl] = useState(\"\");\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n\r\n  const itemsPerPage = 10;\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(`${import.meta.env.VITE_API_URL}/api/admin/management/order`, {\r\n        params: {\r\n          order_id: search,\r\n          status: statusFilter,\r\n          start_date: startDate,\r\n          end_date: endDate,\r\n          page: currentPage,\r\n          limit: itemsPerPage,\r\n        },\r\n        withCredentials: true,\r\n      });\r\n      const { success, data } = res.data;\r\n      // console.log(data)\r\n      if (success) {\r\n        setCounts(data.counts || {});\r\n        setOrders(data.orders || []);\r\n        setTotalPages(data.pagination?.totalPages || 0);\r\n      } else {\r\n        setOrders([]);\r\n        setTotalPages(0);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      toast.error(\"Error fetching orders\");\r\n      setOrders([]);\r\n      setTotalPages(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, [statusFilter, currentPage, startDate, endDate]);\r\n\r\n  const handleSearch = () => {\r\n    setCurrentPage(1);\r\n    fetchOrders();\r\n  };\r\n\r\n  const openInvoiceModal = async (order) => {\r\n    setSelectedOrder(order);\r\n\r\n    if (!order?.invoice_pdf_url) {\r\n      toast.error(\"Invoice not generated yet. Please try again later.\");\r\n      return;\r\n    }\r\n\r\n    const baseUrl = window.location.origin;\r\n    setInvoiceUrl(`${baseUrl}${order.invoice_pdf_url}`);\r\n\r\n    console.log(`${import.meta.env.VITE_API_URL}${order.invoice_pdf_url}`)\r\n    setShowInvoiceModal(true);\r\n  };\r\n\r\n\r\n  const downloadInvoice = async (order) => {\r\n    if (!order?.invoice_pdf_url) {\r\n      toast.error(\"Invoice not available for this order yet.\");\r\n      return;\r\n    }\r\n\r\n    const link = document.createElement(\"a\");\r\n    link.href = `${window.location.origin}${order.invoice_pdf_url}`;\r\n    link.download = `invoice-${order.id}.pdf`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n\r\n  const exportExcel = () => {\r\n    if (!orders?.length) return toast.error(\"No orders to export\");\r\n    const ws = XLSX.utils.json_to_sheet(\r\n      orders.map((o, i) => ({\r\n        SR_No: (currentPage - 1) * itemsPerPage + i + 1,\r\n        Order_ID: o.id,\r\n        Customer: o.User?.name || \"-\",\r\n        Vendor: o.Vendor?.name || \"-\",\r\n        Product: o.product?.product_type || \"-\",\r\n        Amount: o.total_amount,\r\n        Status: o.order_status,\r\n        Date: o.order_date ? new Date(o.order_date).toISOString().split(\"T\")[0] : \"-\",\r\n      }))\r\n    );\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Orders\");\r\n    XLSX.writeFile(wb, \"orders.xlsx\");\r\n  };\r\n\r\n  const stats = [\r\n    { label: \"Total Orders\", value: counts?.total || 0, icon: \"üõí\" },\r\n    { label: \"Pending\", value: counts?.pending || 0, icon: \"‚è±Ô∏è\" },\r\n    { label: \"Shipped\", value: counts?.shipped || 0, icon: \"üöö\" },\r\n    { label: \"Delivered\", value: counts?.delivered || 0, icon: \"‚úÖ\" },\r\n    { label: \"Cancelled\", value: counts?.cancelled || 0, icon: \"‚ùå\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"p-6 bg-gray-50 min-h-screen text-gray-800 space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h2 className=\"text-xl font-bold\">Orders Management</h2>\r\n          <p className=\"text-sm text-gray-500\">Track and manage all orders</p>\r\n        </div>\r\n        <button\r\n          onClick={exportExcel}\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2 hover:bg-blue-700\"\r\n        >\r\n          <Download size={16} /> Export Excel\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4\">\r\n        {stats.map((s, i) => (\r\n          <div key={i} className=\"rounded-xl border bg-white shadow-sm p-4 flex flex-col items-center\">\r\n            <div className=\"text-2xl mb-2\">{s.icon}</div>\r\n            <p className=\"text-lg font-bold\">{s.value}</p>\r\n            <p className=\"text-sm text-gray-500\">{s.label}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"flex gap-2 items-center bg-white shadow-sm p-4 rounded-lg w-full\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search by Order ID\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          className=\"px-3 py-2 border rounded-lg w-full\"\r\n        />\r\n        <button\r\n          onClick={handleSearch}\r\n          className=\"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-orange-500\"\r\n        >\r\n          Search\r\n        </button>\r\n        <input\r\n          type=\"date\"\r\n          value={startDate}\r\n          onChange={(e) => setStartDate(e.target.value)}\r\n          className=\"px-3 py-2 border rounded-lg\"\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          value={endDate}\r\n          onChange={(e) => setEndDate(e.target.value)}\r\n          className=\"px-3 py-2 border rounded-lg\"\r\n        />\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => {\r\n            setStatusFilter(e.target.value);\r\n            setCurrentPage(1);\r\n          }}\r\n          className=\"px-3 py-2 border rounded-lg\"\r\n        >\r\n          <option value=\"all\">All</option>\r\n          <option value=\"pending\">Pending</option>\r\n          <option value=\"confirmed\">Confirmed</option>\r\n          <option value=\"packed\">Packed</option>\r\n          <option value=\"shipped\">Shipped</option>\r\n          <option value=\"delivered\">Delivered</option>\r\n          <option value=\"cancelled\">Cancelled</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"bg-white shadow rounded-lg overflow-x-auto\">\r\n        <table className=\"w-full border-collapse text-left\">\r\n          <thead className=\"bg-gray-100\">\r\n            <tr>\r\n              <th className=\"px-4 py-3 border\">SR.</th>\r\n              <th className=\"px-4 py-3 border\">Order ID</th>\r\n              <th className=\"px-4 py-3 border\">Customer Name</th>\r\n              <th className=\"px-4 py-3 border\">Vendor Name</th>\r\n              <th className=\"px-4 py-3 border\">Product Name</th>\r\n              <th className=\"px-4 py-3 border\">Amount</th>\r\n              <th className=\"px-4 py-3 border\">Status</th>\r\n              {/* <th className=\"px-4 py-3 border\">Date</th> */}\r\n              <th className=\"px-4 py-3 border\">Invoice</th>\r\n              <th className=\"px-4 py-3 border\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {loading ? (\r\n              <tr>\r\n                <td colSpan={9} className=\"text-center py-6\">Loading orders...</td>\r\n              </tr>\r\n            ) : orders.length === 0 ? (\r\n              <tr>\r\n                <td colSpan={9} className=\"text-center py-6\">No data found</td>\r\n              </tr>\r\n            ) : (\r\n              orders.map((o, i) => (\r\n                <tr key={i} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-4 py-3 border\">{(currentPage - 1) * itemsPerPage + i + 1}</td>\r\n                  <td className=\"px-4 py-3 border text-blue-600 font-medium\">{o.id}</td>\r\n                  <td className=\"px-4 py-3 border\">{o.User?.name || \"-\"}</td>\r\n                  <td className=\"px-4 py-3 border\">{o.Vendor?.name || \"-\"}</td>\r\n                  <td className=\"px-4 py-3 border\">{o.product?.product_type || \"-\"}</td>\r\n                  <td className=\"px-4 py-3 border font-bold\">‚Çπ{o.total_amount}</td>\r\n                  <td className=\"px-4 py-3 border\">\r\n                    <span\r\n                      className={`px-2 py-1 text-xs font-semibold rounded-full ${o.order_status === \"delivered\"\r\n                        ? \"bg-green-100 text-green-700\"\r\n                        : o.order_status === \"pending\"\r\n                          ? \"bg-yellow-100 text-yellow-700\"\r\n                          : o.order_status === \"cancelled\"\r\n                            ? \"bg-red-100 text-red-700\"\r\n                            : \"bg-purple-100 text-purple-700\"\r\n                        }`}\r\n                    >\r\n                      {o.order_status}\r\n                    </span>\r\n                  </td>\r\n                  {/* <td className=\"px-4 py-3 border\">\r\n                    {o.order_date ? new Date(o.order_date).toISOString().split(\"T\")[0] : \"-\"}\r\n                  </td> */}\r\n                  <td className=\"p-3 border text-center flex gap-3 justify-center\">\r\n                    <Eye\r\n                      className=\"h-5 w-5 text-blue-600 cursor-pointer\"\r\n                      onClick={() => openInvoiceModal(o)}\r\n                    />\r\n                    <Download\r\n                      className=\"h-5 w-5 text-green-600 cursor-pointer\"\r\n                      onClick={() => downloadInvoice(o)}\r\n                    />\r\n                  </td>\r\n                  <td className=\"px-4 py-3 border\">\r\n                    <Link\r\n                      to={`/admin/orders/${o.id}`}\r\n                      className=\"text-blue-500 hover:text-blue-700 flex items-center gap-1\"\r\n                    >\r\n                      <Eye size={16} /> View\r\n                    </Link>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {totalPages > 1 && (\r\n        <div className=\"flex justify-end gap-2 mt-4\">\r\n\r\n          {/* Prev Button */}\r\n          <button\r\n            onClick={() => setCurrentPage((p) => Math.max(p - 1, 1))}\r\n            disabled={currentPage === 1}\r\n            className=\"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50\"\r\n          >\r\n            Prev\r\n          </button>\r\n\r\n          {/* Page Numbers Logic */}\r\n          {(() => {\r\n            const pages = [];\r\n            const showPages = 5; // only 5 pages visible\r\n\r\n            let start = Math.max(1, currentPage - 2);\r\n            let end = Math.min(totalPages, start + showPages - 1);\r\n\r\n            if (end - start < showPages - 1) {\r\n              start = Math.max(1, end - showPages + 1);\r\n            }\r\n\r\n            // Show first page if not included\r\n            if (start > 1) {\r\n              pages.push(\r\n                <button\r\n                  key={1}\r\n                  onClick={() => setCurrentPage(1)}\r\n                  className={`px-3 py-1 border rounded ${currentPage === 1 ? \"bg-blue-600 text-white\" : \"\"\r\n                    }`}\r\n                >\r\n                  1\r\n                </button>\r\n              );\r\n              pages.push(<span key=\"dots1\">...</span>);\r\n            }\r\n\r\n            // Middle pages\r\n            for (let i = start; i <= end; i++) {\r\n              pages.push(\r\n                <button\r\n                  key={i}\r\n                  onClick={() => setCurrentPage(i)}\r\n                  className={`px-3 py-1 border rounded ${currentPage === i ? \"bg-blue-600 text-white\" : \"\"\r\n                    }`}\r\n                >\r\n                  {i}\r\n                </button>\r\n              );\r\n            }\r\n\r\n            // Show last page if not included\r\n            if (end < totalPages) {\r\n              pages.push(<span key=\"dots2\">...</span>);\r\n              pages.push(\r\n                <button\r\n                  key={totalPages}\r\n                  onClick={() => setCurrentPage(totalPages)}\r\n                  className={`px-3 py-1 border rounded ${currentPage === totalPages ? \"bg-blue-600 text-white\" : \"\"\r\n                    }`}\r\n                >\r\n                  {totalPages}\r\n                </button>\r\n              );\r\n            }\r\n\r\n            return pages;\r\n          })()}\r\n\r\n          {/* Next Button */}\r\n          <button\r\n            onClick={() => setCurrentPage((p) => Math.min(p + 1, totalPages))}\r\n            disabled={currentPage === totalPages}\r\n            className=\"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50\"\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {showInvoiceModal && (\r\n        <div className=\"fixed inset-0 bg-black/60 z-50 flex justify-center items-center\">\r\n          <div className=\"bg-white w-[80%] h-[95%] rounded-lg p-4 relative\">\r\n            <button\r\n              onClick={() => setShowInvoiceModal(false)}\r\n              className=\"absolute top-2 right-2 text-red-500 font-bold\"\r\n            >\r\n              ‚úï\r\n            </button>\r\n\r\n            <iframe\r\n              src={invoiceUrl}\r\n              className=\"w-full h-[90%] border\"\r\n              title=\"Invoice Preview\"\r\n            />\r\n\r\n            <div className=\"text-right mt-2\">\r\n              {/* <button\r\n                onClick={() => downloadInvoice(invoiceUrl)}\r\n                className=\"px-4 py-2 bg-green-600 text-white rounded\"\r\n              >\r\n                Download Invoice\r\n              </button> */}\r\n            </div>\r\n            <button\r\n              onClick={() => downloadInvoice(selectedOrder)}\r\n              className=\"px-4 py-2 bg-green-600 text-white rounded\"\r\n            >\r\n              Download Invoice\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n"],"names":["Orders","orders","setOrders","useState","counts","setCounts","loading","setLoading","search","setSearch","statusFilter","setStatusFilter","startDate","setStartDate","endDate","setEndDate","currentPage","setCurrentPage","totalPages","setTotalPages","showInvoiceModal","setShowInvoiceModal","invoiceUrl","setInvoiceUrl","selectedOrder","setSelectedOrder","fetchOrders","async","res","axios","get","concat","process","params","order_id","status","start_date","end_date","page","limit","withCredentials","success","data","_data$pagination","pagination","error","console","toast","useEffect","downloadInvoice","order","invoice_pdf_url","link","document","createElement","href","window","location","origin","download","id","body","appendChild","click","removeChild","stats","label","value","total","icon","pending","shipped","delivered","cancelled","_jsxs","className","children","_jsx","onClick","exportExcel","length","ws","XLSX","json_to_sheet","map","o","i","_o$User","_o$Vendor","_o$product","SR_No","Order_ID","Customer","User","name","Vendor","Product","product","product_type","Amount","total_amount","Status","order_status","Date","order_date","toISOString","split","wb","book_new","book_append_sheet","Download","size","s","type","placeholder","onChange","e","target","handleSearch","colSpan","_o$User2","_o$Vendor2","_o$product2","Eye","baseUrl","log","openInvoiceModal","Link","to","p","Math","max","disabled","pages","start","end","min","showPages","push","src","title"],"ignoreList":[],"sourceRoot":""}