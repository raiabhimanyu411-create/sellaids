{"version":3,"file":"static/js/6768.a90749e9.chunk.js","mappings":"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","sources":["pages/dashboard/Addresses.js","stores/useWishlistStore.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport useWishlistStore from \"../../stores/useWishlistStore\";\nimport axios from \"axios\";\n\nexport default function Addresses() {\n  const { user } = useWishlistStore();\n\n  const [addresses, setAddresses] = useState([]);\n  const [form, setForm] = useState({ label: \"\", address: \"\", phone: \"\" });\n  const [editId, setEditId] = useState(null);\n  const [showForm, setShowForm] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  // Fetch addresses on dashboard load or after checkout save\n  useEffect(() => {\n    if (user?.id) fetchAddresses();\n  }, [user]);\n\n  const fetchAddresses = async () => {\n    try {\n      setLoading(true);\n      const res = await axios.get(`http://localhost:5000api/user/${user.id}/addresses`);\n      setAddresses(res.data);\n    } catch (err) {\n      console.error(\"Failed to fetch addresses:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setForm((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleEditClick = (address) => {\n    setEditId(address.id);\n    setForm({ label: address.label, address: address.address, phone: address.phone || \"\" });\n    setShowForm(true);\n  };\n\n  const handleCancelEdit = () => {\n    setEditId(null);\n    setForm({ label: \"\", address: \"\", phone: \"\" });\n    setShowForm(false);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!form.label || !form.address) {\n      alert(\"Please fill at least label and address\");\n      return;\n    }\n\n    try {\n      let res;\n      if (editId) {\n        // Update existing\n        res = await axios.put(\n          `http://localhost:5000api/user/${user.id}/addresses/${editId}`,\n          form\n        );\n      } else {\n        // Add new\n        res = await axios.post(`http://localhost:5000api/user/${user.id}/addresses`, form);\n      }\n\n      setAddresses(res.data);\n      handleCancelEdit();\n    } catch (err) {\n      console.error(err.response?.data || err.message);\n      alert(\"Failed to save address\");\n    }\n  };\n\n  const handleDelete = async (id) => {\n    if (!window.confirm(\"Are you sure to delete this address?\")) return;\n\n    try {\n      const res = await axios.delete(`http://localhost:5000api/user/${user.id}/addresses/${id}`);\n      setAddresses(res.data);\n      if (editId === id) handleCancelEdit();\n    } catch (err) {\n      console.error(err.response?.data || err.message);\n      alert(\"Failed to delete address\");\n    }\n  };\n\n  if (loading) return <p>Loading addresses...</p>;\n\n  return (\n    <div>\n      <h1 className=\"text-2xl font-bold mb-4\">Manage Address</h1>\n\n      {/* Addresses List */}\n      {addresses.map((addr) => (\n        <div\n          key={addr.id}\n          className=\"bg-white p-4 rounded-xl shadow mb-4 flex justify-between items-center\"\n        >\n          <div>\n            <p className=\"font-medium\">{addr.label}</p>\n            <p>{addr.address}</p>\n            {addr.phone && <p className=\"text-sm text-gray-500\">Phone: {addr.phone}</p>}\n          </div>\n          <div className=\"flex gap-2\">\n            {!showForm && (\n              <button\n                onClick={() => handleEditClick(addr)}\n                className=\"text-blue-600 hover:text-blue-800 font-semibold\"\n              >\n                Edit\n              </button>\n            )}\n            {showForm && editId === addr.id && (\n              <button\n                onClick={() => handleDelete(addr.id)}\n                className=\"text-red-600 hover:text-red-800 font-semibold\"\n              >\n                Delete\n              </button>\n            )}\n          </div>\n        </div>\n      ))}\n\n      {/* Edit/Add Form */}\n      {showForm && (\n        <form\n          onSubmit={handleSubmit}\n          className=\"bg-white p-4 rounded-xl shadow space-y-4 max-w-md\"\n        >\n          <input\n            type=\"text\"\n            name=\"label\"\n            placeholder=\"Label (e.g. Home, Office)\"\n            value={form.label}\n            onChange={handleChange}\n            className=\"border px-3 py-2 rounded w-full\"\n            required\n          />\n          <textarea\n            name=\"address\"\n            placeholder=\"Address\"\n            value={form.address}\n            onChange={handleChange}\n            className=\"border px-3 py-2 rounded w-full\"\n            required\n          />\n          <input\n            type=\"text\"\n            name=\"phone\"\n            placeholder=\"Phone (optional)\"\n            value={form.phone}\n            onChange={handleChange}\n            className=\"border px-3 py-2 rounded w-full\"\n          />\n          <div className=\"flex gap-2\">\n            <button\n              type=\"submit\"\n              className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\n            >\n              {editId ? \"Update Address\" : \"+ Add New Address\"}\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleCancelEdit}\n              className=\"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400\"\n            >\n              Cancel\n            </button>\n          </div>\n        </form>\n      )}\n    </div>\n  );\n}\n","import { create } from \"zustand\";\n\nconst useUserStore = create((set) => ({\n  user: null, // logged-in user info\n  wishlist: [], // user's wishlist\n\n  // Set user after login\n  setUser: (userData) => set({ user: userData }),\n\n  // Logout function\n  logout: () => set({ user: null, wishlist: [] }),\n\n  // Set wishlist from backend\n  setWishlist: (items) => set({ wishlist: items }),\n\n  // Add an item to wishlist\n  addToWishlist: (item) =>\n    set((state) => ({ wishlist: [...state.wishlist, item] })),\n\n  // Remove an item from wishlist\n  removeFromWishlist: (id) =>\n    set((state) => ({ wishlist: state.wishlist.filter((item) => item.id !== id) })),\n}));\n\nexport default useUserStore;"],"names":["Addresses","user","useWishlistStore","addresses","setAddresses","useState","form","setForm","label","address","phone","editId","setEditId","showForm","setShowForm","loading","setLoading","useEffect","id","fetchAddresses","async","res","axios","get","concat","data","err","console","error","handleChange","e","name","value","target","prev","_objectSpread","handleCancelEdit","_jsx","children","_jsxs","className","map","addr","onClick","handleEditClick","window","confirm","delete","_err$response2","response","message","alert","handleDelete","onSubmit","preventDefault","put","post","_err$response","type","placeholder","onChange","required","create","set","wishlist","setUser","userData","logout","setWishlist","items","addToWishlist","item","state","removeFromWishlist","filter"],"ignoreList":[],"sourceRoot":""}