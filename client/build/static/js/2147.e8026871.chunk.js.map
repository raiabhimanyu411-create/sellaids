{"version":3,"file":"static/js/2147.e8026871.chunk.js","mappings":"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","sources":["pages/Admin/Users.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport toast from \"react-hot-toast\";\nimport * as XLSX from \"xlsx\";\nimport { Download } from \"lucide-react\";\n\nconst UsersManagement = () => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [search, setSearch] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalUsers, setTotalUsers] = useState(0);\n  const itemsPerPage = 10;\n\n  // Fetch users from backend\n  const fetchUsers = async () => {\n    try {\n      setLoading(true);\n      const res = await axios.get(\n        `${import.meta.env.VITE_API_URL}/api/admin/management/user`,\n        {\n          params: {\n            search:search,\n            page:currentPage,\n            limit: itemsPerPage,\n          },\n          withCredentials: true,\n        }\n      );\n\n      const { success, data, message } = res.data;\n\n      if (success) {\n        setUsers(data.users || []);\n        setTotalUsers(data.total || 0);\n        // Only show toast if search is used\n        toast.success(message);\n      } else {\n        setUsers([]);\n        setTotalUsers(0);\n        toast.error(message || \"Failed to fetch users\");\n      }\n    } catch (err) {\n      console.error(err);\n      setUsers([]);\n      setTotalUsers(0);\n      toast.error(\"Error fetching users\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fetch on page change\n  useEffect(() => {\n    fetchUsers();\n  }, [currentPage]);\n\n  // Handle search\n  const handleSearch = () => {\n    setCurrentPage(1);     \n    fetchUsers();    \n  };\n\n  // Export Excel\n  const exportExcel = () => {\n    if (!users.length) {\n      toast.error(\"No users to export\");\n      return;\n    }\n\n    const ws = XLSX.utils.json_to_sheet(\n      users.map((u, index) => ({\n        SR_No: (currentPage - 1) * itemsPerPage + index + 1,\n        Name: u.name,\n        Email: u.email,\n        Phone: u.phone,\n      }))\n    );\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, \"Users\");\n    XLSX.writeFile(wb, \"users.xlsx\");\n    toast.success(\"Excel exported successfully!\");\n  };\n\n  const totalPages = Math.ceil(totalUsers / itemsPerPage);\n\n  return (\n    <div className=\"p-6 bg-gray-50 min-h-screen text-gray-800\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-2xl font-bold\">Users Management</h2>\n        <button\n          onClick={exportExcel}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2 hover:bg-blue-700\"\n        >\n          <Download size={16}/> Export Report\n        </button>\n      </div>\n\n      {/* Search */}\n      <div className=\"mb-4 flex gap-2 flex-wrap bg-white shadow-sm p-4 rounded-lg\">\n        <input\n          type=\"text\"\n          placeholder=\"Search by name, email or phone\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n          className=\"px-4 py-2 border rounded-lg flex-1 focus:ring focus:ring-blue-200\"\n        />\n        <button\n          onClick={handleSearch}\n          className=\"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-orange-500\"\n        >\n          Search\n        </button>\n      </div>\n\n      {/* Users Table */}\n      <div className=\"bg-white rounded-lg shadow overflow-x-auto\">\n        <table className=\"w-full text-left border-collapse\">\n          <thead className=\"bg-gray-100 text-gray-700\">\n            <tr>\n              <th className=\"px-4 py-3 border\">SR.</th>\n              <th className=\"px-4 py-3 border\">Name</th>\n              <th className=\"px-4 py-3 border\">Email</th>\n              <th className=\"px-4 py-3 border\">Phone</th>\n            </tr>\n          </thead>\n          <tbody>\n            {loading ? (\n              <tr>\n                <td colSpan={4} className=\"text-center py-6\">\n                  Loading users...\n                </td>\n              </tr>\n            ) : users.length === 0 ? (\n              <tr>\n                <td colSpan={4} className=\"text-center py-6\">\n                  No users found\n                </td>\n              </tr>\n            ) : (\n              users.map((user, index) => (\n                <tr key={user.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-4 py-3 border\">{(currentPage - 1) * itemsPerPage + index + 1}</td>\n                  <td className=\"px-4 py-3 border font-medium\">{user.name}</td>\n                  <td className=\"px-4 py-3 border\">{user.email}</td>\n                  <td className=\"px-4 py-3 border\">{user.phone}</td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Pagination */}\n      {totalPages > 1 && (\n        <div className=\"flex justify-end gap-2 mt-4\">\n          <button\n            onClick={() => setCurrentPage((p) => Math.max(p - 1, 1))}\n            disabled={currentPage === 1}\n            className=\"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50\"\n          >\n            Prev\n          </button>\n\n          {Array.from({ length: totalPages }, (_, i) => (\n            <button\n              key={i}\n              onClick={() => setCurrentPage(i + 1)}\n              className={`px-3 py-1 border rounded ${\n                currentPage === i + 1 ? \"bg-blue-600 text-white\" : \"\"\n              }`}\n            >\n              {i + 1}\n            </button>\n          ))}\n\n          <button\n            onClick={() => setCurrentPage((p) => Math.min(p + 1, totalPages))}\n            disabled={currentPage === totalPages}\n            className=\"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50\"\n          >\n            Next\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default UsersManagement;\n"],"names":["UsersManagement","users","setUsers","useState","loading","setLoading","search","setSearch","currentPage","setCurrentPage","totalUsers","setTotalUsers","fetchUsers","async","res","axios","get","concat","process","params","page","limit","withCredentials","success","data","message","total","toast","error","err","console","useEffect","totalPages","Math","ceil","_jsxs","className","children","_jsx","onClick","exportExcel","length","ws","XLSX","json_to_sheet","map","u","index","SR_No","Name","name","Email","email","Phone","phone","wb","book_new","book_append_sheet","Download","size","type","placeholder","value","onChange","e","target","handleSearch","colSpan","user","id","p","max","disabled","Array","from","_","i","min"],"ignoreList":[],"sourceRoot":""}