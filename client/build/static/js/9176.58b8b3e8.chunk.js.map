{"version":3,"file":"static/js/9176.58b8b3e8.chunk.js","mappings":"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","sources":["pages/dashboard/RaiseTicket.js","stores/useWishlistStore.js"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport useWishlistStore from \"../../stores/useWishlistStore\";\nimport { toast, Toaster } from \"react-hot-toast\";\n\nexport default function RaiseTicket() {\n  const [form, setForm] = useState({ title: \"\", message: \"\" });\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const { user } = useWishlistStore();\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n    setError(\"\");\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const res = await axios.post(\n        `${import.meta.env.VITE_API_URL}/api/user/support`,\n        {\n          title: form.title,\n          message: form.message,\n        },\n        { withCredentials: true }\n      );\n\n      console.log(\"Server response:\", JSON.stringify(res.data, null, 2)); // Log response for debugging\n      const { success, message, data, error } = res.data;\n      const ticket = data?.ticket; // Access nested ticket\n\n      if (success && ticket) {\n        setForm({ title: \"\", message: \"\" });\n        toast.success(`Ticket raised successfully ✅`);\n        setTimeout(() => {\n          navigate(\"/user/support\");\n        }, 1500);\n      } else {\n        const errorMessage = error?.join(\", \") || message || \"Failed to raise ticket ❌\";\n        setError(errorMessage);\n        toast.error(errorMessage, {\n          style: {\n            background: \"#fee2e2\",\n            color: \"#dc2626\",\n          },\n        });\n      }\n    } catch (err) {\n      console.error(\"Axios error:\", JSON.stringify(err.response?.data, null, 2)); // Log error details\n      const errorMessage =\n        err.response?.data?.error?.join(\", \") ||\n        err.response?.data?.message ||\n        \"Failed to raise ticket. Please try again ❌\";\n      setError(errorMessage);\n      toast.error(errorMessage, {\n        style: {\n          background: \"#fee2e2\",\n          color: \"#dc2626\",\n        },\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancel = () => {\n    navigate(\"/user/support\");\n  };\n\n  return (\n    <div className=\"max-w-3xl mx-auto p-6 bg-white rounded shadow mt-6\">\n      <h2 className=\"text-2xl font-bold mb-6\">Raise a Support Ticket</h2>\n      {error && (\n        <div className=\"bg-red-100 text-red-700 p-3 rounded mb-4\">{error}</div>\n      )}\n      <form onSubmit={handleSubmit} className=\"space-y-5\">\n        <div>\n          <label className=\"block text-gray-700 mb-1\">Title</label>\n          <input\n            type=\"text\"\n            name=\"title\"\n            placeholder=\"Enter ticket title\"\n            value={form.title}\n            onChange={handleChange}\n            className=\"w-full border px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600\"\n            required\n            maxLength={200}\n            disabled={loading}\n          />\n        </div>\n        <div>\n          <label className=\"block text-gray-700 mb-1\">Message</label>\n          <textarea\n            name=\"message\"\n            placeholder=\"Describe your issue\"\n            value={form.message}\n            onChange={handleChange}\n            className=\"w-full border px-4 py-2 rounded min-h-[120px] focus:outline-none focus:ring-2 focus:ring-red-600\"\n            required\n            disabled={loading}\n          />\n        </div>\n        <div className=\"flex space-x-4\">\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"bg-red-600 text-white px-6 py-3 rounded hover:bg-red-700 disabled:bg-red-400\"\n          >\n            {loading ? \"Submitting...\" : \"Submit Ticket\"}\n          </button>\n          <button\n            type=\"button\"\n            onClick={handleCancel}\n            className=\"bg-gray-300 text-gray-700 px-6 py-3 rounded hover:bg-gray-400\"\n            disabled={loading}\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}","import { create } from \"zustand\";\n\nconst useUserStore = create((set) => ({\n  user: null, // logged-in user info\n  wishlist: [], // user's wishlist\n\n  // Set user after login\n  setUser: (userData) => set({ user: userData }),\n\n  // Logout function\n  logout: () => set({ user: null, wishlist: [] }),\n\n  // Set wishlist from backend\n  setWishlist: (items) => set({ wishlist: items }),\n\n  // Add an item to wishlist\n  addToWishlist: (item) =>\n    set((state) => ({ wishlist: [...state.wishlist, item] })),\n\n  // Remove an item from wishlist\n  removeFromWishlist: (id) =>\n    set((state) => ({ wishlist: state.wishlist.filter((item) => item.id !== id) })),\n}));\n\nexport default useUserStore;"],"names":["RaiseTicket","form","setForm","useState","title","message","error","setError","loading","setLoading","navigate","useNavigate","user","useWishlistStore","handleChange","e","_objectSpread","target","name","value","_jsxs","className","children","_jsx","onSubmit","async","preventDefault","res","axios","post","concat","process","withCredentials","console","log","JSON","stringify","data","success","ticket","toast","setTimeout","errorMessage","join","style","background","color","err","_err$response","_err$response2","_err$response2$data","_err$response2$data$e","_err$response3","_err$response3$data","response","type","placeholder","onChange","required","maxLength","disabled","onClick","handleCancel","create","set","wishlist","setUser","userData","logout","setWishlist","items","addToWishlist","item","state","removeFromWishlist","id","filter"],"ignoreList":[],"sourceRoot":""}