/*! For license information please see 6493.90d1e486.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[6493],{65469(e,t,s){s.d(t,{A:()=>o});const o=(0,s(77784).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},76493(e,t,s){s.r(t),s.d(t,{default:()=>u});var o=s(89379),r=s(65043),i=s(90837),a=s(28845),l=s(79722),n=s(47874),d=s(24974),c=s(23768),h=s(81035),m=s(70579);function u(){const{wishlist:e,setWishlist:t,removeFromWishlist:s}=(0,i.A)(),{user:u,isAuthenticated:x,isUserLoading:p}=(0,d.k)(),{fetchCart:v}=(0,a.A)(),[g,w]=(0,r.useState)(!1),f=(0,n.Zp)(),[j,b]=(0,r.useState)({});(0,r.useEffect)(()=>{p||(x&&null!==u&&void 0!==u&&u.id?(w(!0),l.A.get("".concat("https://sellaids.com","/api/user/wishlist"),{withCredentials:!0}).then(e=>{t(e.data.data||[]);const s=e.data.data.reduce((e,t)=>(e[t.product_id]=0,e),{});b(s)}).catch(e=>{var t,s,o,r,i,a;console.error("Failed to fetch wishlist:",{status:null===(t=e.response)||void 0===t?void 0:t.status,message:(null===(s=e.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||e.message,url:null===(r=e.config)||void 0===r?void 0:r.url}),401===(null===(i=e.response)||void 0===i?void 0:i.status)?(c.oR.error("Session expired. Please log in again \u274c"),setTimeout(()=>{f("/UserAuth/UserLogin",{state:{from:window.location.pathname}})},1500)):404===(null===(a=e.response)||void 0===a?void 0:a.status)&&c.oR.error("Wishlist endpoint not found. Please check the API URL \u274c")}).finally(()=>w(!1))):(c.oR.error("Please log in to view your wishlist \u274c"),setTimeout(()=>{f("/UserAuth/UserLogin",{state:{from:window.location.pathname}})},1500)))},[u,x,p,f,t]);const y=e=>{e.target.src="https://via.placeholder.com/96"},k=e=>{if(!e||"object"!==typeof e)return[];const t=(()=>{try{return JSON.parse(e.more_images||"[]")||[]}catch(t){return[]}})();return[e.front_photo,e.back_photo,e.label_photo,e.inside_photo,e.button_photo,e.wearing_photo,...t].filter(Boolean)},N=(t,s)=>{b(r=>{var i;const a=r[t]||0,l=k((null===(i=e.find(e=>e.product_id===t))||void 0===i?void 0:i.product)||{}),n=(a+s+l.length)%l.length;return(0,o.A)((0,o.A)({},r),{},{[t]:n})})};return p?(0,m.jsx)("div",{className:"min-h-screen bg-gray-100 p-6",children:(0,m.jsx)("p",{className:"text-center mt-10",children:"Loading user..."})}):g?(0,m.jsx)("div",{className:"min-h-screen bg-gray-100 p-6",children:(0,m.jsx)("p",{className:"text-center mt-10",children:"Loading wishlist..."})}):x&&null!==u&&void 0!==u&&u.id?(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"min-h-screen bg-gray-100 p-6",children:[(0,m.jsx)("h1",{className:"text-3xl font-bold mb-8 text-gray-800 text-center",children:"My Wishlist"}),0===e.length?(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center mt-20 text-gray-500",children:[(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mb-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),(0,m.jsx)("p",{className:"text-xl font-semibold",children:"No products added to your wishlist."})]}):(0,m.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(s=>{var o,r,i;const a=k(s.product),n=j[s.product_id]||0,d=a[n];return(0,m.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-lg flex flex-col items-center hover:shadow-xl transition-shadow duration-200",children:[(0,m.jsxs)("div",{className:"mb-4 text-center sm:text-left w-full",children:[(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("div",{className:"flex justify-center mb-2 min-h-[192px]",children:(0,m.jsx)("img",{src:d?"".concat("https://sellaids.com","/").concat(d):"https://via.placeholder.com/96",alt:(null===(o=s.product)||void 0===o?void 0:o.name)||"Product Image",className:"max-w-full h-auto max-h-48 object-contain rounded-md",onError:y})}),(0,m.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,m.jsx)("button",{onClick:()=>N(s.product_id,-1),className:"text-gray-600 hover:text-gray-800 disabled:text-gray-300",disabled:a.length<=1,children:(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,m.jsx)("button",{onClick:()=>N(s.product_id,1),className:"text-gray-600 hover:text-gray-800 disabled:text-gray-300",disabled:a.length<=1,children:(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,m.jsx)("div",{className:"flex overflow-x-auto space-x-2 mt-2 justify-center",children:a.map((e,t)=>{var o;return(0,m.jsx)("img",{src:"".concat("https://sellaids.com","/").concat(e),alt:"".concat(null===(o=s.product)||void 0===o?void 0:o.name," Thumbnail ").concat(t+1),className:"max-w-12 h-auto max-h-12 object-contain rounded-md cursor-pointer ".concat(n===t?"border-2 border-blue-600":""),onClick:()=>N(s.product_id,t-n),onError:y},t)})})]}),(0,m.jsx)("p",{className:"font-semibold text-lg text-gray-900 mt-4",children:(null===(r=s.product)||void 0===r?void 0:r.name)||"Unknown Product"}),(0,m.jsxs)("p",{className:"text-gray-700",children:["\u20b9",(null===(i=s.product)||void 0===i?void 0:i.price)||"N/A"]})]}),(0,m.jsxs)("div",{className:"w-full flex justify-between mt-4",children:[(0,m.jsxs)("button",{onClick:()=>(async e=>{try{const t=await l.A.post("".concat("https://sellaids.com","/api/user/cart"),{product_id:e},{withCredentials:!0});c.oR.success(t.data.message||"Item added to cart! \u2705"),await v()}catch(o){var t,s;console.error("Failed to add to cart:",o),c.oR.error((null===(t=o.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to add item to cart \u274c")}})(s.product_id),className:"flex items-center justify-center bg-green-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-green-700 transition-colors w-1/2 mr-2",children:[(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Add to Cart"]}),(0,m.jsxs)("button",{onClick:()=>(async s=>{try{const o=e.filter(e=>e.product_id!==s);t(o);const r=await l.A.delete("".concat("https://sellaids.com","/api/user/wishlist/").concat(s),{withCredentials:!0});c.oR.success(r.data.message||"Item removed from wishlist! \u2705")}catch(i){var o,r;console.error("Failed to remove item:",i),l.A.get("".concat("https://sellaids.com","/api/user/wishlist"),{withCredentials:!0}).then(e=>t(e.data.data||[])),c.oR.error((null===(o=i.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)||"Failed to remove item \u274c")}})(s.product_id),className:"flex items-center justify-center bg-red-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-red-700 transition-colors w-1/2 ml-2",children:[(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})]})]},s.product_id)})})]}),(0,m.jsx)("div",{className:"mt-8",children:(0,m.jsx)(h.A,{})})]}):null}},81035(e,t,s){s.d(t,{A:()=>i});s(65043);var o=s(65469),r=s(70579);const i=()=>(0,r.jsx)("div",{className:"mt-4 py-4 border-t border-gray-200 bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto text-center",children:(0,r.jsxs)("button",{onClick:()=>{window.location.href="/"},className:"inline-flex items-center gap-2 text-gray-700 hover:text-red-600 font-medium text-lg transition-colors duration-200 group",children:[(0,r.jsx)(o.A,{size:20,className:"mr-2 group-hover:-translate-x-1 transition-transform"}),"Back to Website"]})})})},90837(e,t,s){s.d(t,{A:()=>o});const o=(0,s(4131).v)(e=>({user:null,wishlist:[],setUser:t=>e({user:t}),logout:()=>e({user:null,wishlist:[]}),setWishlist:t=>e({wishlist:t}),addToWishlist:t=>e(e=>({wishlist:[...e.wishlist,t]})),removeFromWishlist:t=>e(e=>({wishlist:e.wishlist.filter(e=>e.id!==t)}))}))}}]);
//# sourceMappingURL=6493.90d1e486.chunk.js.map