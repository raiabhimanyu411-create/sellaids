/*! For license information please see 882.7cf8f491.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[882],{9855(e,t,s){s.d(t,{A:()=>a});const a=(0,s(77784).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},20882(e,t,s){s.r(t),s.d(t,{default:()=>p});var a=s(65043),r=s(47874),l=s(79722),n=s(23768),i=s(60184),o=s(28845),d=s(24974),c=s(35999),u=s(58600),h=s(70579);const p=()=>{const[e,t]=(0,a.useState)([]),[s,p]=(0,a.useState)(!0),[m,x]=(0,a.useState)(12),g=(0,a.useRef)(null),[f,v]=(0,a.useState)([]),[y,j]=(0,a.useState)([]),[b,w]=(0,a.useState)([]),[N,A]=(0,a.useState)([]),[k,C]=(0,a.useState)([]),[_,S]=(0,a.useState)([]),[z,F]=(0,a.useState)(!1),[L,P]=(0,a.useState)(null),[E,I]=(0,a.useState)("default"),[O,U]=(0,a.useState)(!1),[M,H]=(0,a.useState)(window.innerWidth>=1024),T=(0,r.Zp)(),X=(0,r.zy)(),{fetchCart:D}=(0,o.A)(),{isAuthenticated:R,isUserLoading:q}=(0,d.k)(),{pendingAdd:J,setPendingAdd:Q}=(0,c.N)(),V="https://sellaids.com",W=e=>T("/product-details/".concat(e));(0,a.useEffect)(()=>{const e=()=>H(window.innerWidth>=1024);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{R&&"cart"===(null===J||void 0===J?void 0:J.type)&&J.product&&(Z(J.product),Q(null))},[R,J]),(0,a.useEffect)(()=>{(async()=>{try{p(!0);const a=await l.A.get("".concat(V,"/api/product/shop/all-products"));var e,s;if(console.log(a.data),a.data.success&&a.data.products&&Array.isArray(a.data.products.products))t(a.data.products.products),C((null===(e=a.data.products.filters)||void 0===e?void 0:e.product_conditions)||[]),S((null===(s=a.data.products.filters)||void 0===s?void 0:s.sizes)||[]);else n.Ay.error("No products found")}catch(a){n.Ay.error("Failed to load products")}finally{p(!1)}})()},[V]);const Z=async e=>{try{const t=await l.A.post("".concat(V,"/api/user/cart"),{product_id:e._id},{withCredentials:!0});t.data.success?(n.Ay.success(t.data.message),await D(),P({product_id:t.data.data.product_id,user_id:t.data.data.user_id}),F(!0)):n.Ay.success(t.data.message)}catch(t){n.Ay.error("Failed to add to cart")}},K=e=>q?n.Ay.error("Please wait..."):R?void(async e=>{try{const t=await l.A.post("".concat(V,"/api/user/wishlist"),{product_id:e._id},{withCredentials:!0});t.data.success?(n.Ay.success(t.data.message),T("/user/wishlist")):n.Ay.success(t.data.message)}catch(s){var t;401===(null===(t=s.response)||void 0===t?void 0:t.status)?(Q({product:e,from:X.pathname,type:"wishlist"}),T("/UserAuth/UserLogin")):n.Ay.error("Failed to add to wishlist")}})(e):(Q({product:e,from:X.pathname,type:"wishlist"}),n.Ay.error("Please log in to add to wishlist"),void T("/UserAuth/UserLogin")),Y=[...e.filter(e=>{const t=0===f.length||f.includes(e.product_condition),s="Other"===e.size&&e.size_other?e.size_other:e.size,a=0===y.length||y.some(e=>null===s||void 0===s?void 0:s.toString().split(",").map(e=>e.trim()).includes(e));return t&&a})].sort((e,t)=>"low"===E?e.product_price-t.product_price:"high"===E?t.product_price-e.product_price:0);return(0,a.useEffect)(()=>{const e=new IntersectionObserver(e=>{e[0].isIntersecting&&m<Y.length&&x(e=>Math.min(e+12,Y.length))},{threshold:.1});return g.current&&e.observe(g.current),()=>e.disconnect()},[Y,m]),s?(0,h.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 px-8 py-12",children:Array.from({length:9}).map((e,t)=>(0,h.jsxs)("div",{className:"animate-pulse bg-white rounded-lg shadow-md",children:[(0,h.jsx)("div",{className:"h-72 bg-gray-200"}),(0,h.jsxs)("div",{className:"p-4 space-y-3",children:[(0,h.jsx)("div",{className:"h-5 bg-gray-200 rounded w-3/4"}),(0,h.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},t))}):(0,h.jsxs)(h.Fragment,{children:[O&&(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-40 lg:hidden",onClick:()=>U(!1)}),(0,h.jsxs)("div",{className:"flex flex-col lg:flex-row gap-10 px-8 py-10 bg-gradient-to-b from-gray-50 to-gray-100 min-h-screen",children:[(0,h.jsxs)("aside",{className:"".concat(O?"translate-x-0":"-translate-x-full","\n          lg:translate-x-0 fixed inset-y-0 left-0 w-80 bg-white p-6 rounded-2xl shadow-lg border z-40 transition-transform duration-300 lg:w-1/4 lg:sticky lg:top-4 lg:h-fit overflow-y-auto"),children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6 lg:hidden",children:[(0,h.jsx)("h3",{className:"text-2xl font-bold",children:"Filters"}),(0,h.jsx)("button",{onClick:()=>U(!1),children:(0,h.jsx)(i.QCr,{})})]}),(0,h.jsxs)("div",{className:"mb-8",children:[(0,h.jsx)("p",{className:"font-semibold mb-3",children:"Condition"}),k.map(e=>(0,h.jsxs)("label",{className:"flex items-center gap-3 mb-2",children:[(0,h.jsx)("input",{type:"checkbox",checked:M?f.includes(e):b.includes(e),onChange:()=>{(M?v:w)(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])}}),(0,h.jsx)("span",{className:"capitalize",children:e.replace(/_/g," ")})]},e))]}),_.length>0&&(0,h.jsxs)("div",{className:"mb-8",children:[(0,h.jsx)("p",{className:"font-semibold mb-3",children:"Size"}),_.map(e=>(0,h.jsxs)("label",{className:"flex items-center gap-3 mb-2",children:[(0,h.jsx)("input",{type:"checkbox",checked:M?y.includes(e):N.includes(e),onChange:()=>{(M?j:A)(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])}}),e]},e))]}),!M&&(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsx)("button",{onClick:()=>{v(b),j(N),U(!1)},className:"w-full bg-orange-500 text-white py-3 rounded-lg",children:"Apply Filters"}),(0,h.jsx)("button",{onClick:()=>{w([]),A([]),v([]),j([]),U(!1)},className:"w-full border border-red-500 text-red-500 py-3 rounded-lg",children:"Clear All"})]})]}),(0,h.jsxs)("main",{className:"flex-1",children:[(0,h.jsxs)("nav",{className:"text-sm mb-6",children:[(0,h.jsx)(r.N_,{to:"/",className:"text-blue-600",children:"Home"})," / ",(0,h.jsx)("span",{children:"Shop"})]}),(0,h.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-8 gap-4",children:[(0,h.jsxs)("p",{children:["Showing ",Math.min(m,Y.length)," of"," ",Y.length," products"]}),(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[!M&&(0,h.jsxs)("button",{onClick:()=>{w([...f]),A([...y]),U(!0)},className:"bg-orange-500 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,h.jsx)(i.YsJ,{})," Filters"]}),(0,h.jsxs)("select",{value:E,onChange:e=>I(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[(0,h.jsx)("option",{value:"default",children:"Default sorting"}),(0,h.jsx)("option",{value:"low",children:"Price: Low to High"}),(0,h.jsx)("option",{value:"high",children:"Price: High to Low"})]})]})]}),(0,h.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:Y.slice(0,m).map(e=>{let t={};try{t=JSON.parse((null===e||void 0===e?void 0:e.product_additionalInfo)||"{}")}catch(s){}return(0,h.jsxs)("div",{className:"group overflow-hidden transition-all duration-300",children:[(0,h.jsxs)("div",{className:"relative h-80 overflow-hidden rounded-t-xl bg-gray-50",children:[(0,h.jsx)("img",{src:"".concat("https://sellaids.com","/").concat(null===e||void 0===e?void 0:e.product_img),alt:e.product_name,onClick:()=>W(e._id),className:"object-cover w-full h-full cursor-pointer\r transition-transform duration-500 ease-in-out\r group-hover:scale-105"}),0===e.stock&&(0,h.jsx)("div",{className:"absolute inset-0 flex items-center justify-center\r bg-black/60 pointer-events-none",children:(0,h.jsx)("span",{className:"text-white text-xl font-bold tracking-widest\r border-2 border-white px-5 py-2 rounded-lg",children:"OUT OF STOCK"})}),(0,h.jsxs)("div",{className:"absolute inset-0 flex justify-center items-end gap-3 \r opacity-0 translate-y-5 group-hover:opacity-100 group-hover:translate-y-0 \r transition-all duration-300 pb-4 pointer-events-none",children:[(0,h.jsx)("button",{onClick:()=>K(e),className:"bg-black p-3 rounded-md text-white hover:bg-orange-500 pointer-events-auto",children:(0,h.jsx)(i.Mbv,{})}),(0,h.jsx)("button",{onClick:()=>(e=>q?n.Ay.error("Please wait..."):R?void Z(e):(Q({product:e,from:X.pathname,type:"cart"}),n.Ay.error("Please log in to add to cart"),void T("/UserAuth/UserLogin",{state:{from:X.pathname}})))(e),className:"bg-black p-3 rounded-md text-white hover:bg-orange-500 pointer-events-auto",children:(0,h.jsx)(i.AsH,{})})]})]}),(0,h.jsxs)("div",{className:"py-5 ps-1",children:[(0,h.jsx)("h3",{onClick:()=>W(e._id),className:"cursor-pointer hover:text-blue-700",children:t.title||t.description}),(0,h.jsxs)("p",{className:"mt-2",children:["\u20b9",e.product_price]})]})]},e._id)})}),m<Y.length&&(0,h.jsx)("div",{ref:g,className:"flex justify-center py-10",children:(0,h.jsx)("div",{className:"w-10 h-10 border-4 border-gray-300 border-t-orange-500 rounded-full animate-spin"})})]})]}),(0,h.jsx)(u.A,{open:z,product:L,onClose:()=>F(!1),onRemove:()=>{F(!1),n.Ay.success("Item removed")},onContinue:()=>F(!1)})]})}},35999(e,t,s){s.d(t,{N:()=>a});const a=(0,s(4131).v)(e=>({pendingAdd:null,setPendingAdd:t=>e({pendingAdd:t}),clearPending:()=>e({pendingAdd:null})}))},58600(e,t,s){s.d(t,{A:()=>c});var a=s(65043),r=s(79722),l=s(87095),n=s(9855),i=s(40614),o=s(47874),d=s(70579);const c=e=>{let{open:t,onClose:s,product:c}=e;const[u,h]=(0,a.useState)([]),[p,m]=(0,a.useState)(!1),[x,g]=(0,a.useState)(!1),f=(0,o.Zp)();(0,a.useEffect)(()=>(document.body.style.overflow=t?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[t]);if((0,a.useEffect)(()=>{if(!t)return;(async()=>{try{var e;m(!0);const t=await r.A.get("".concat("https://sellaids.com","/api/user/cart"),{withCredentials:!0});null!==(e=t.data)&&void 0!==e&&e.success&&h(t.data.data||[])}catch(t){console.error("Failed to fetch cart")}finally{m(!1)}})()},[t]),!t)return null;const v=u.reduce((e,t)=>{var s;return e+((null===t||void 0===t||null===(s=t.product)||void 0===s?void 0:s.price)||0)*((null===t||void 0===t?void 0:t.quantity)||1)},0);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black/40 z-40 pointer-events-auto"}),(0,d.jsxs)("div",{className:"fixed top-0 right-0 h-full w-full sm:w-[420px] bg-white z-50 shadow-2xl flex flex-col ".concat(x?"animate-slide-out":"animate-slide-in"),onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-5 border-b",children:[(0,d.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,d.jsx)(l.A,{className:"w-5 h-5 text-orange-600"}),"Added to Cart"]}),(0,d.jsx)("button",{onClick:()=>{g(!0),setTimeout(()=>{g(!1),s()},350)},children:(0,d.jsx)(i.A,{className:"w-6 h-6"})})]}),p&&(0,d.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,d.jsx)("p",{className:"text-gray-500",children:"Loading cart..."})}),!p&&u.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex-1 overflow-y-auto",children:u.map(e=>{var t,s,a,l,i;return(0,d.jsxs)("div",{className:"p-5 flex gap-4 border-b relative",children:[(0,d.jsx)("button",{onClick:()=>(async e=>{try{await r.A.delete("".concat("https://sellaids.com","/api/user/cart/").concat(e),{withCredentials:!0}),h(t=>t.filter(t=>t.product_id!==e))}catch(t){console.error("Failed to remove product")}})(e.product_id),className:"absolute top-14 left-3 text-red-500 hover:text-red-700",children:(0,d.jsx)(n.A,{size:18})}),(0,d.jsx)("img",{src:null!==e&&void 0!==e&&null!==(t=e.product)&&void 0!==t&&t.front_photo?"".concat("https://sellaids.com","/").concat(e.product.front_photo):"",alt:(null===e||void 0===e||null===(s=e.product)||void 0===s?void 0:s.name)||"Product",className:"w-20 h-24 object-cover rounded-lg border ml-6"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"font-medium line-clamp-2",children:null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.name}),(0,d.jsxs)("p",{className:"text-orange-600 font-bold mt-1",children:["\u20b9",null===e||void 0===e||null===(l=e.product)||void 0===l||null===(i=l.price)||void 0===i?void 0:i.toLocaleString()]}),(0,d.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Qty: ",null===e||void 0===e?void 0:e.quantity]})]})]},e.product_id)})}),(0,d.jsx)("div",{className:"px-5 py-3 border-t",children:(0,d.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,d.jsx)("span",{children:"Total"}),(0,d.jsxs)("span",{children:["\u20b9",v.toLocaleString()]})]})}),(0,d.jsxs)("div",{className:"p-5 space-y-3",children:[(0,d.jsxs)("button",{onClick:async()=>{try{for(const e of u)await r.A.delete("".concat("https://sellaids.com","/api/user/cart/").concat(e.product_id),{withCredentials:!0});h([])}catch(e){console.error("Failed to clear cart")}},className:"w-full flex items-center justify-center gap-2 border-2 border-red-500 text-red-600 py-3 rounded-xl font-medium hover:bg-red-50",children:[(0,d.jsx)(n.A,{className:"w-5 h-5"}),"Remove"]}),(0,d.jsx)("button",{onClick:async()=>{s(),f("/user/checkout")},className:"w-full bg-orange-600 text-white py-3 rounded-xl font-bold hover:bg-orange-700",children:"Checkout"})]})]}),!p&&0===u.length&&(0,d.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Cart is empty"})]}),(0,d.jsx)("style",{children:"\n    /* ===== SLIDE IN ===== */\n    .animate-slide-in {\n      animation: slideIn 0.35s ease-out forwards;\n    }\n    @keyframes slideIn {\n      from { transform: translateX(100%); }\n      to { transform: translateX(0); }\n    }\n\n    /* ===== SLIDE OUT ===== */\n    .animate-slide-out {\n      animation: slideOut 0.35s ease-in forwards;\n    }\n    @keyframes slideOut {\n      from { transform: translateX(0); }\n      to { transform: translateX(100%); }\n    }\n  "})]})}}}]);
//# sourceMappingURL=882.7cf8f491.chunk.js.map